/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{1081:function(e,t,i){var a=i(234),s=i(67),n=i(63),l=i(8),r=i(22),o=i(65),u=i(66),c=i(108),d="[object Map]",p="[object Set]",f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(r(e)&&(l(e)||"string"==typeof e||"function"==typeof e.splice||o(e)||c(e)||n(e)))return!e.length;var t=s(e);if(t==d||t==p)return!e.size;if(u(e))return!a(e).length;for(var i in e)if(f.call(e,i))return!1;return!0}},1082:function(e,t,i){"use strict";e.exports=function(e,t){if("string"==typeof e)return o(e);if("number"==typeof e)return r(e,t);return null},e.exports.format=r,e.exports.parse=o;var a=/\B(?=(\d{3})+(?!\d))/g,s=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},l=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function r(e,t){if(!Number.isFinite(e))return null;var i=Math.abs(e),l=t&&t.thousandsSeparator||"",r=t&&t.unitSeparator||"",o=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,u=Boolean(t&&t.fixedDecimals),c=t&&t.unit||"";c&&n[c.toLowerCase()]||(c=i>=n.tb?"TB":i>=n.gb?"GB":i>=n.mb?"MB":i>=n.kb?"KB":"B");var d=(e/n[c.toLowerCase()]).toFixed(o);return u||(d=d.replace(s,"$1")),l&&(d=d.replace(a,l)),d+r+c}function o(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,i=l.exec(e),a="b";return i?(t=parseFloat(i[1]),a=i[4].toLowerCase()):(t=parseInt(e,10),a="b"),Math.floor(n[a]*t)}},1083:function(e,t,i){"use strict";var a=i(762);i.n(a).a},445:function(e,t,i){},446:function(e,t,i){"use strict";var a=i(42),s=i.n(a),n=i(9),l=i.n(n),r=i(24),o=i.n(r),u=i(56);i(449);t.a={uiTypes:["input"],props:{name:String,readonly:Boolean,disabled:Boolean},data:function(){return{initialData:void 0,isTopMostInput:Object(u.g)(this,"input","field")}},computed:l()({realName:function(){return this.formField&&this.formField.name||this.name},realDisabled:function(){return Boolean(this.disabled||this.formField&&this.formField.realDisabled)},realReadonly:function(){return Boolean(this.readonly||this.formField&&this.formField.realReadonly)},realInvalid:function(){return this.formField&&!this.formField.validity.valid&&this.isTopMostInput}},Object(u.e)("field","formField").computed),created:function(){this.isTopMostInput&&this.formField&&this.formField.field&&(this.$emit=this.realEmit.bind(this,this.$emit))},methods:{realEmit:function(e,t,i,a){e.apply(this,Array.prototype.slice.call(arguments,1));var n=t.split(":"),l=s()(n,2),r=l[0];l[1]&&o()(["hook","update"],r)||this.formField.$emit("interact",t)}}}},448:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",e._g(e._b({staticClass:"veui-button",class:{"veui-button-loading":e.loading,"veui-disabled":e.disabled}},"button",e.attrs,!1),e.listeners),[e.loading?[e._t("loading",[i("veui-icon",{attrs:{name:e.icons.loading,spin:""}}),e._v(" "),i("span",{staticClass:"veui-button-loading-text"},[e._t("default")],2)])]:[e._t("default")]],2)};a._withStripped=!0;var s=i(447),n=i.n(s);i(450);i(137).a.defaults({icons:{loading:"loading"},ui:{style:{values:["alt","primary"]},role:{values:["link"]},size:{values:["large","small","tiny","micro"]},shape:{values:["round","square"]}}},"button");var l=i(55),r=i(138),o=i(56),u=["mousedown","mouseup","click","keydown","keyup","keypress","focus","blur"],c={name:"veui-button",mixins:[r.a],components:{"veui-icon":l.a},props:{disabled:Boolean,name:String,type:{type:String,default:"button"},value:String,loading:Boolean},computed:{attrs:function(){var e=n()(this.$props,"loading");return e.disabled=this.disabled||this.loading,e},listeners:function(){return Object(o.c)(u,this)}},methods:{focus:function(){this.$el.focus()}}},d=(i(453),i(1)),p=Object(d.a)(c,a,[],!1,null,null,null);t.a=p.exports},450:function(e,t,i){"use strict";i(55).a.register({loading:{width:"12",height:"12",paths:[{d:"M11.22 4.17a5.5 5.5 0 1 0 .1 3.47l-.96-.29a4.5 4.5 0 1 1-.08-2.84l.94-.34z"}]}})},451:function(e,t,i){"use strict";var a=i(9),s=i.n(a),n=i(447),l=i.n(n),r=i(56);t.a={props:{overlayClass:Object(r.a)(),overlayOptions:{default:function(){return{}}}},data:function(){return{localOverlayOptions:{}}},computed:{realOverlayOptions:function(){var e=s()({},this.localOverlayOptions,this.overlayOptions),t=e.position;return l()(s()({},e,Object(r.l)(t)),"position")}},methods:{mergeOverlayClass:function(e){return Object(r.i)(this.overlayClass,e)},relocate:function(){if(!this.$refs.overlay)throw new Error("Can not find [this.$refs.overlay] to relocate");this.$refs.overlay.relocate()}}}},453:function(e,t,i){"use strict";var a=i(445);i.n(a).a},459:function(e,t,i){var a=i(26),s=i(14),n="[object Number]";e.exports=function(e){return"number"==typeof e||s(e)&&a(e)==n}},461:function(e,t,i){"use strict";i(55).a.register({"exclamation-circle-o":{width:"16",height:"16",paths:[{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 9.13v-5h2v5H7zm1 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}]}})},467:function(e,t){var i=/^(attrs|props|on|nativeOn|class|style|hook)$/;function a(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce(function(e,t){var s,n,l,r,o;for(l in t)if(s=e[l],n=t[l],s&&i.test(l))if("class"===l&&("string"==typeof s&&(o=s,e[l]=s={},s[o]=!0),"string"==typeof n&&(o=n,t[l]=n={},n[o]=!0)),"on"===l||"nativeOn"===l||"hook"===l)for(r in n)s[r]=a(s[r],n[r]);else if(Array.isArray(s))e[l]=s.concat(n);else if(Array.isArray(n))e[l]=[s].concat(n);else for(r in n)s[r]=n[r];else e[l]=t[l];return e},{})}},472:function(e,t,i){"use strict";i(55).a.register({cross:{width:"14",height:"14",paths:[{d:"M7 6.14L1.86 1 1 1.86 6.14 7 1 12.14l.86.86L7 7.86 12.14 13l.86-.86L7.86 7 13 1.86 12.14 1 7 6.14z","fill-rule":"evenodd"}]}})},480:function(e,t,i){"use strict";i(55).a.register({check:{width:"14",height:"14",paths:[{d:"M5.44 11L2 7.09l1.01-1.04L5.44 8.9l5.5-5.9L12 4.07z","fill-rule":"evenodd"}]}})},487:function(e,t,i){},501:function(e,t,i){var a=i(220),s=1,n=4;e.exports=function(e){return a(e,s|n)}},562:function(e,t,i){"use strict";var a=i(487);i.n(a).a},564:function(e,t,i){"use strict";i(55).a.register({"plus-huge":{width:"50",height:"50",paths:[{d:"M24 24H0v2h24v24h2V26h24v-2H26V0h-2v24z","fill-rule":"evenodd"}]}})},704:function(e,t,i){"use strict";var a=i(467),s=i.n(a),n=i(17),l=i.n(n),r=i(137);r.a.defaults({ui:{style:{values:["alt"]},size:{values:["large","small"]}}},"tooltip");var o=i(458),u=i(138),c=i(451),d=i(145),p=i(141),f={hover:"mouseenter"};r.a.defaults({"tooltip.hideDelay":300});var h={name:"veui-tooltip",directives:{outside:d.a},mixins:[u.a,c.a],components:{"veui-overlay":o.a},props:{position:{type:String,default:"top"},target:{validator:function(e){return Object(p.d)(e)}},trigger:{type:String,default:"hover"},hideDelay:{type:Number,default:r.a.get("tooltip.hideDelay")},custom:{type:Boolean,default:!1},open:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0}},data:function(){return{localOpen:this.open,localOverlayOptions:{position:this.position,constraints:[{to:"window",attachment:"together"}]}}},computed:{localTrigger:function(){var e=void 0,t=void 0;if(l()(this.trigger)){var i=this.trigger.split("-");e=i[0],t=i[1]||i[0]}return{open:e=f[e]||e,close:t}},targetNode:function(){return Object(p.b)(this.target,this.$vnode.context)[0]},outsideOptions:function(){return{handler:this.closeHandler,refs:this.targetNode,trigger:this.localTrigger.close,delay:this.hideDelay,excludeSelf:!this.interactive}},realOpen:function(){return this.localOpen&&!!this.targetNode}},watch:{open:function(e){this.localOpen!==e&&(this.localOpen=e)},localOpen:function(e){this.open!==e&&this.$emit("update:open",e)},target:function(){this.localOpen=this.open},position:function(e){this.localOverlayOptions.position=e}},methods:{openHandler:function(){this.localOpen=!0},closeHandler:function(){this.localOpen=!1},bindHandler:function(){this.custom||this.targetNode&&(this.targetNode.__bindToolTip__||(this.targetNode.addEventListener(this.localTrigger.open,this.openHandler,!1),this.targetNode.__bindToolTip__=!0))}},render:function(){var e=arguments[0],t=[];return this.custom||t.push({name:"outside",value:this.outsideOptions,modifiers:{}}),e("veui-overlay",{ref:"overlay",attrs:{target:this.targetNode,open:this.realOpen,options:this.realOverlayOptions,overlayClass:this.mergeOverlayClass({"veui-tooltip-box":!0,"veui-tooltip-box-transparent":!this.interactive})}},[e("div",s()([{class:"veui-tooltip",attrs:{ui:this.ui,role:"tooltip"}},{directives:t}]),[e("div",{class:"veui-tooltip-content"},[this.$slots.default])])])},mounted:function(){this.bindHandler()},updated:function(){this.bindHandler()},beforeDestroy:function(){this.custom||this.targetNode&&this.targetNode.removeEventListener(this.localTrigger.open,this.openHandler,!1)}},v=(i(562),i(1)),m=Object(v.a)(h,void 0,void 0,!1,null,null,null);t.a=m.exports},759:function(e,t,i){"use strict";i(55).a.register({upload:{width:"14",height:"14",paths:[{d:"M7.5 1.39v9.41h-1V1.45l-2.8 2.8-.7-.71L6.5.04V0h1v.04l.04-.03 3.53 3.53-.7.71L7.5 1.39zM.87 8v5h12.24V8c1.06 0 .88.34.88.75v4.5c0 .42-.39.75-.88.75H.88c-.49 0-.88-.34-.88-.75v-4.5C0 8.33-.04 8 .87 8z","fill-rule":"evenodd"}]}})},760:function(e,t,i){"use strict";i(55).a.register({clip:{width:"12",height:"12",paths:[{d:"M4.67 4.65l1.29-1.53a2.5 2.5 0 0 1 3.83 3.21l-1.93 2.3L7.09 8l1.93-2.3a1.5 1.5 0 0 0-2.3-1.93L4.8 6.06l-.77-.64.64-.77.65-.76.76.64-1.93 2.3a.5.5 0 0 0 .77.64l2.23-2.66.77.64-2.24 2.66a1.5 1.5 0 0 1-2.3-1.93l1.3-1.53zm3.7 1.8l.78.65-1.93 2.3a3.5 3.5 0 0 1-5.37-4.5l2.9-3.45.77.64-2.9 3.45a2.5 2.5 0 0 0 3.83 3.22l1.93-2.3z"}]}})},761:function(e,t,i){"use strict";i(55).a.register({refresh:{width:"12",height:"12",paths:[{d:"M10.62 8.31c-.07.03-.42 0-.45.06-.72 1.41-2.89 2.46-4.36 2.47-2.52.03-4.9-2.46-4.88-4.9 0-2.42 2.5-5.01 4.84-5 1.3 0 3.4 1.17 4.27 2.15l-1.89.08c-.16 0-.37.39-.37.55 0 .16.21.38.37.38h2.5c.16 0 .34-.58.34-.75V.72a.3.3 0 0 0-.3-.3c-.15 0-.65.14-.65.3l-.03 1.13A5.72 5.72 0 0 0 .46 3.66a6.13 6.13 0 0 0 1.24 6.58A5.78 5.78 0 0 0 5.8 12a5.7 5.7 0 0 0 3.07-.9 6 6 0 0 0 2.1-2.35.32.32 0 0 0-.13-.42.26.26 0 0 0-.22-.02z"}]}})},762:function(e,t,i){},996:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"main",staticClass:"veui-uploader",attrs:{ui:e.ui}},["file"===e.type?i("div",{staticClass:"veui-uploader-button-container"},[i("label",{ref:"label",staticClass:"veui-button veui-uploader-input-label",class:{"veui-uploader-input-label-disabled":e.realUneditable||e.maxCount>1&&e.fileList.length>=e.maxCount||"iframe"===e.requestMode&&e.isSubmiting},on:{click:e.handleClick}},[e._t("button-label",[i("veui-icon",{staticClass:"veui-uploader-input-label-icon",attrs:{name:e.icons.upload}}),e._v("选择文件")]),e._v(" "),i("input",{ref:"input",attrs:{id:e.inputId,hidden:"",type:"file",name:e.name,disabled:e.realUneditable||e.maxCount>1&&e.fileList.length>=e.maxCount||"iframe"===e.requestMode&&e.disabledWhenSubmiting,accept:e.accept,multiple:"iframe"!==e.requestMode&&(e.maxCount>1||void 0===e.maxCount)&&!e.isReplacing},on:{change:e.handleNewFiles,click:function(e){e.stopPropagation()}}})],2),e._v(" "),e.$slots.desc?i("span",{staticClass:"veui-uploader-tip"},[e._t("desc")],2):e._e(),e._v(" "),i("span",{staticClass:"veui-uploader-error"},[e.error.typeInvalid?[e._t("type-invalid",[i("veui-icon",{attrs:{name:e.icons.alert}}),e._v("文件的类型不符合要求")])]:e._e(),e._v(" "),e.error.sizeInvalid?[e._t("size-invalid",[i("veui-icon",{attrs:{name:e.icons.alert}}),e._v("文件的大小不符合要求")])]:e._e(),e._v(" "),e.error.countOverflow?[e._t("count-overflow",[i("veui-icon",{attrs:{name:e.icons.alert}}),e._v("文件的数量超过限制")])]:e._e()],2)]):e._e(),e._v(" "),i("transition-group",{class:e.listClass,attrs:{tag:"ul",name:"veui-uploader-list"}},[e._l(e.fileList,function(t,a){return i("li",{key:t.name+"-"+t.src},["file"===e.type&&"uploading"!==t.status||"image"===e.type&&(!t.status||"success"===t.status)?[e._t("file",["file"===e.type?[e._t("file-before",null,null,e.getScopeValue(a,t)),e._v(" "),i("div",{staticClass:"veui-uploader-list-container"},[i("veui-icon",{staticClass:"veui-uploader-list-icon",attrs:{name:e.icons.file}}),e._v(" "),i("span",{staticClass:"veui-uploader-list-name",class:{"veui-uploader-list-name-success":"success"===t.status,"veui-uploader-list-name-failure":"failure"===t.status},attrs:{title:t.name}},[e._v(e._s(t.name))]),e._v(" "),"success"===t.status?i("span",{staticClass:"veui-uploader-success"},[e._t("success-label",[e._v("上传成功！")])],2):e._e(),e._v(" "),"failure"===t.status?i("span",{ref:"fileFailure"+a,refInFor:!0,staticClass:"veui-uploader-failure"},[e._t("failure-label",[e._v("上传失败")])],2):e._e(),e._v(" "),"failure"===t.status?i("veui-button",{class:e.listClass+"-retry",attrs:{ui:"link"},on:{click:function(i){e.retry(t)}}},[i("veui-icon",{attrs:{name:e.icons.redo}}),e._v("重试")],1):e._e(),e._v(" "),i("veui-button",{staticClass:"veui-uploader-button-remove",attrs:{ui:"link",disabled:e.realUneditable},on:{click:function(i){e.removeFile(t)}}},[i("veui-icon",{attrs:{name:e.icons.clear}})],1),e._v(" "),i("veui-tooltip",{attrs:{position:"top",target:"fileFailure"+a}},[e._v(e._s(t.failureReason))])],1),e._v(" "),e._t("file-after",null,null,e.getScopeValue(a,t))]:[e._t("file-before",null,null,e.getScopeValue(a,t)),e._v(" "),i("div",{staticClass:"veui-uploader-list-image-container"},[i("img",{attrs:{src:t.src,alt:t.alt||""}}),e._v(" "),e.realUneditable?e._e():i("div",{class:e.listClass+"-mask"},[i("label",{staticClass:"veui-button",class:{"veui-uploader-input-label-disabled":e.realUneditable},attrs:{for:e.inputId},on:{click:function(i){i.stopPropagation(),e.replaceFile(t)}}},[e._v("重新上传")]),e._v(" "),i("veui-button",{class:e.listClass+"-mask-remove",attrs:{disabled:e.realUneditable},on:{click:function(i){e.removeFile(t)}}},[i("veui-icon",{attrs:{name:e.icons.clear}}),e._v("移除")],1),e._v(" "),e._t("extra-operation",null,null,e.getScopeValue(a,t))],2),e._v(" "),i("transition",{attrs:{name:"veui-uploader-fade"}},["success"===t.status?i("div",{class:e.listClass+"-success"},[i("span",{staticClass:"veui-uploader-success"},[e._t("success-label",[i("veui-icon",{attrs:{name:e.icons.success}}),e._v("完成")])],2)]):e._e()])],1),e._v(" "),e._t("file-after",null,null,e.getScopeValue(a,t))]],{file:e.getScopeValue(a,t)})]:"uploading"===t.status?[e._t("uploading",[e._t("file-before",null,null,e.getScopeValue(a,t)),e._v(" "),i("div",{class:e.listClass+"-container"},[i("veui-uploader-progress",{class:"image"===e.type?e.listClass+"-status":"",attrs:{type:e.progress,loaded:t.loaded,total:t.total,convertSizeUnit:e.convertSizeUnit}},[e._t("uploading-label",[e._v("上传中...")])],2),e._v(" "),"file"===e.type?i("veui-button",{staticClass:"veui-uploader-button-remove",attrs:{ui:"link"},on:{click:function(i){e.cancelFile(t)}}},[i("veui-icon",{attrs:{name:e.icons.clear}})],1):i("veui-button",{attrs:{ui:"aux operation"},on:{click:function(i){e.cancelFile(t)}}},[e._v("取消")])],1),e._v(" "),e._t("file-after",null,null,e.getScopeValue(a,t))],{file:e.getScopeValue(a,t)})]:"failure"===t.status&&"image"===e.type?[e._t("failure",[e._t("file-before",null,null,e.getScopeValue(a,t)),e._v(" "),i("div",{class:e.listClass+"-container"},[i("div",{class:e.listClass+"-status"},[i("span",{staticClass:"veui-uploader-failure"},[e._t("failure-label",[e._v("错误！")]),e._v(e._s(t.failureReason))],2)]),e._v(" "),i("veui-button",{attrs:{ui:"aux operation"},on:{click:function(i){e.retry(t)}}},[e._v("重试")]),e._v(" "),i("veui-button",{class:e.listClass+"-mask-remove "+e.listClass+"-mask-remove-failure",attrs:{ui:"link"},on:{click:function(i){e.removeFile(t)}}},[i("veui-icon",{attrs:{name:e.icons.clear}}),e._v("移除")],1)],1),e._v(" "),e._t("file-after",null,null,e.getScopeValue(a,t))],{file:e.getScopeValue(a,t)})]:e._e()],2)}),e._v(" "),"image"===e.type?i("li",{directives:[{name:"show",rawName:"v-show",value:!e.maxCount||e.fileList.length<e.maxCount,expression:"!maxCount || fileList.length < maxCount"}],key:"input"},[i("div",{staticClass:"veui-uploader-list-image-container"},[i("label",{ref:"label",class:{"veui-button":e.$scopedSlots["extra-operation"],"veui-uploader-input-label-image":!e.$scopedSlots["extra-operation"],"veui-uploader-input-label-disabled":e.$scopedSlots["extra-operation"]&&(e.realUneditable||e.maxCount>1&&e.fileList.length>=e.maxCount||e.isSubmiting)},on:{click:e.handleClick}},[i("input",{ref:"input",attrs:{id:e.inputId,hidden:"",type:"file",name:e.name,disabled:e.realUneditable||"iframe"===e.requestMode&&e.disabledWhenSubmiting,accept:e.accept,multiple:"iframe"!==e.requestMode&&(e.maxCount>1||void 0===e.maxCount)&&!e.isReplacing},on:{change:e.handleNewFiles,click:function(e){e.stopPropagation()}}}),e._v(" "),e.$scopedSlots["extra-operation"]?[e._t("button-label",[e._v("选择文件")])]:i("veui-icon",{attrs:{name:e.icons.add}})],2),e._v(" "),e._t("extra-operation")],2)]):e._e()],2),e._v(" "),e.$slots.desc&&"image"===e.type?i("span",{staticClass:"veui-uploader-tip"},[e._t("desc")],2):e._e(),e._v(" "),"image"===e.type?i("span",{staticClass:"veui-uploader-error"},[e.error.typeInvalid?[e._t("type-invalid",[i("veui-icon",{attrs:{name:e.icons.alert}}),e._v("文件的类型不符合要求")])]:e._e(),e._v(" "),e.error.sizeInvalid?[e._t("size-invalid",[i("veui-icon",{attrs:{name:e.icons.alert}}),e._v("文件的大小不符合要求")])]:e._e(),e._v(" "),e.error.countOverflow?[e._t("count-overflow",[i("veui-icon",{attrs:{name:e.icons.alert}}),e._v("文件的数量超过限制")])]:e._e()],2):e._e(),e._v(" "),"iframe"===e.requestMode&&e.isSubmiting?i("iframe",{ref:"iframe",staticClass:"veui-uploader-hide",attrs:{id:e.iframeId,name:e.iframeId}}):e._e(),e._v(" "),"iframe"===e.requestMode&&e.isSubmiting?i("form",{ref:"form",staticClass:"veui-uploader-hide",attrs:{action:e.queryURL,enctype:"multipart/form-data",method:"POST",target:e.iframeId}},[e._l(e.payload,function(e,t){return i("input",{key:t,attrs:{name:t},domProps:{value:e}})}),e._v(" "),"callback"===e.iframeMode?i("input",{attrs:{name:"callback"},domProps:{value:"parent."+e.callbackNamespace+"['"+e.callbackFuncName+"']"}}):e._e()],2):e._e()],1)};a._withStripped=!0;var s=i(21),n=i.n(s),l=i(2),r=i.n(l),o=i(9),u=i.n(o),c=i(1081),d=i.n(c),p=i(24),f=i.n(p),h=i(447),v=i.n(h),m=i(102),g=i.n(m),b=i(227),y=i.n(b),_=i(459),x=i.n(_),F=i(103),C=i.n(F),w=i(140),L=i.n(w),S=i(501),O=i.n(S),k=(i(759),i(472),i(480),i(760),i(761),i(564),i(461),i(137));k.a.defaults({icons:{upload:"upload",clear:"cross",success:"check",redo:"refresh",file:"clip",add:"plus-huge",alert:"exclamation-circle-o"},ui:{direction:{values:["horizontal"]}}},"uploader");var M=i(448),$=i(55),N=i(704),z=i(138),U=i(446),q=i(56),R=i(1082),j=i.n(R),I=i(143);k.a.defaults({"uploader.requestMode":"xhr","uploader.iframeMode":"postmessage","uploader.callbackNamespace":"veuiUploadResult"});var B={name:"veui-uploader",components:{"veui-icon":$.a,"veui-button":M.a,"veui-tooltip":N.a,"veui-uploader-progress":{props:["loaded","total","type","uploadingText","convertSizeUnit"],computed:{percent:function(){return"text"!==this.type&&x()(this.loaded)&&x()(this.total)?Math.ceil(this.loaded/this.total*100)+"%":""},content:function(){switch(this.type){case"text":return this.$slots.default;case"number":return this.percent?this.percent+" "+this.convertSizeUnit(this.loaded)+"/"+this.convertSizeUnit(this.total):"";case"bar":return""}}},render:function(){var e=arguments[0],t="bar"===this.type?[e("div",{class:"veui-uploader-progress-bar",style:{width:this.percent||"0%"}}),e("div",{class:"veui-uploader-progress-bar-full"})]:"";return e("div",{class:"veui-uploader-progress"},[this.content,t])}}},mixins:[z.a,U.a],model:{event:"change"},props:{name:{type:String,default:"file"},value:{type:[Array,String,Object]},type:{type:String,default:"file"},action:String,headers:{type:Object,default:function(){return k.a.get("uploader.headers")}},withCredentials:{type:Boolean,default:!0},requestMode:{type:String,default:function(){return k.a.get("uploader.requestMode")},validator:function(e){return f()(["xhr","iframe","custom"],e)}},iframeMode:{type:String,default:function(){return k.a.get("uploader.iframeMode")}},autoUpload:{type:Boolean,default:!0,validator:function(e){return!1===e&&Object(I.a)("[veui-uploader] `auto-upload` is deprecated and will be removed in `1.0.0`. Use `autoupload` instead."),!0}},convertResponse:{type:Function,default:k.a.get("uploader.convertResponse")||function(){}},callbackNamespace:{type:String,default:function(){return k.a.get("uploader.callbackNamespace")}},dataType:{type:String,default:"json",validator:function(e){return f()(["json","text"],e)}},extensions:{type:Array,default:function(){return["jpg","jpeg","gif","png","bmp","tif","tiff","webp","apng","svg"]}},accept:String,maxCount:Number,maxSize:[Number,String],payload:Object,progress:{type:String,default:"text"},autoupload:{type:Boolean,default:!0},order:{type:String,default:"asc",validator:function(e){return f()(["asc","desc"],e)}},compat:{type:Boolean,default:!1},upload:{type:Function}},data:function(){return{fileList:this.genFileList(this.value),canceled:!1,inputId:L()("veui-uploader-input"),iframeId:L()("veui-uploader-iframe"),callbackFuncName:L()("veuiUploaderCallback"),replacingFile:null,currentSubmitingFile:null,isSubmiting:!1,disabledWhenSubmiting:!1,error:{sizeInvalid:!1,typeInvalid:!1,countOverflow:!1}}},watch:{value:function(e){var t=e;Array.isArray(e)||(t=this.genFileList(e));var i=0;this.fileList=this.fileList.map(function(e){return"success"!==e.status&&e.status?e:i+1>t.length?null:C()(e,t[i++])}).filter(function(e){return!!e}).concat(O()(t.slice(i)))},status:function(e){e&&this.$emit("statuschange",e)}},computed:{listClass:function(){return"veui-uploader-list"+("image"===this.type?"-image":"")},latestFile:function(){return this.fileList[this.fileList.length-1]},queryURL:function(){var e=Object(q.m)(C()("iframe"===this.requestMode&&"callback"===this.iframeMode?{callback:"parent."+this.callbackNamespace+"['"+this.callbackFuncName+"']"}:{},this.payload));return this.action+(e?"?"+e:"")},isReplacing:function(){return!!this.replacingFile},realUneditable:function(){return this.realDisabled||this.realReadonly},status:function(){return this.fileList.length?this.fileList.some(function(e){return"uploading"===e.status})?"uploading":this.fileList.some(function(e){return"failure"===e.status})?"failure":"success":"empty"},realAutoupload:function(){return this.autoupload&&this.autoUpload},files:function(){return this.fileList.map(function(e){return u()({},g()(e,["name","src","status"]),e._extra)})},pureFileList:function(){return this.files.filter(function(e){return"success"===e.status||!e.status}).map(function(e){return v()(e,"status")})}},created:function(){"custom"===this.requestMode||this.action||Object(I.a)("[veui-uploader] `action` is required when `request-mode` is not `custom`.")},mounted:function(){var e=this;"iframe"===this.requestMode&&("postmessage"===this.iframeMode?(this.handlePostmessage=function(t){t.source&&t.source.frameElement&&t.source.frameElement.id===e.iframeId&&!e.canceled&&((/^https?:\/\//.test(e.action)?e.action.match(/^https?:\/\/[^/]*/)[0]:location.origin||location.protocol+"//"+location.host)===t.origin&&e.uploadCallback(e.parseData(t.data),e.currentSubmitingFile))},window.addEventListener("message",this.handlePostmessage)):"callback"===this.iframeMode&&(window[this.callbackNamespace]||(window[this.callbackNamespace]={}),window[this.callbackNamespace][this.callbackFuncName]=function(t){e.canceled||e.uploadCallback(e.parseData(t),e.currentSubmitingFile)}))},beforeDestroy:function(){"iframe"===this.requestMode&&("callback"===this.iframeMode?window[this.callbackNamespace][this.callbackFuncName]=null:"postmessage"===this.iframeMode&&window.removeEventListener("message",this.handlePostmessage))},methods:{handleClick:function(){this.replacingFile=null,this.reset()},genFileList:function(e){var t=this;return e?Array.isArray(e)?e.map(function(e){return t.getNewFile(e)}):"string"==typeof e?[C()(this.fileList?this.fileList[0]:{},{src:e,name:e})]:d()(e)?[]:[this.getNewFile(e)]:[]},getNewFile:function(e){var t={},i=v()(e,["name","src"]);return d()(i)||(t._extra=O()(i)),C()(t,g()(e,["name","src"]))},handleNewFiles:function(){var e=this;this.canceled=!1,this.error={sizeInvalid:!1,typeInvalid:!1,countOverflow:!1};var t=void 0;if("iframe"!==this.requestMode)t=[].concat(r()(this.$refs.input.files)).filter(function(t){return e.validateFile(t)});else{var i=this.$refs.input.value.replace("C:\\fakepath\\",""),a=this.$refs.input.files&&this.$refs.input.files[0].size;if(!this.validateFile({name:i,size:a}))return;t=[{status:"uploading",name:i}]}if(t.length)if(this.isReplacing){var s=t[0];s.toBeUploaded=!0,"iframe"!==this.requestMode&&window.URL&&(s.src=window.URL.createObjectURL(s));var n=this.fileList.indexOf(this.replacingFile);this.removeFile(this.replacingFile),this.fileList.splice(n,0,null),this.$set(this.fileList,n,s),this.replacingFile=null,"iframe"===this.requestMode&&this.realAutoupload&&this.submit(s),"iframe"!==this.requestMode&&this.realAutoupload&&this.uploadFile(s)}else{if(1!==this.maxCount&&this.fileList.length+t.length>this.maxCount)return void(this.error.countOverflow=!0);var l=this.fileList.filter(function(e){return"failure"!==e.status}),o="iframe"!==this.requestMode&&"image"===this.type&&window.URL;t=t.map(function(e){return o&&(e.src=window.URL.createObjectURL(e)),e.toBeUploaded=!0,e}),this.fileList="desc"===this.order?[].concat(r()(t),r()(l)):[].concat(r()(l),r()(t)),1===this.maxCount&&(this.fileList=this.fileList.slice(-1)),"iframe"===this.requestMode&&this.realAutoupload&&this.submit(),"iframe"!==this.requestMode&&this.realAutoupload&&this.uploadFiles()}},validateFile:function(e){var t=e.name,i=e.size,a=this.validateFileType(t);this.error.typeInvalid=!a;var s=this.validateFileSize(i);return this.error.sizeInvalid=!s,a&&s},validateFileType:function(e){var t=this;if(!this.accept)return!0;var i=y()(e.split(".")).toLowerCase();return this.accept.split(/,\s*/).some(function(e){var a=y()(e.split(/[./]/)).toLowerCase();return a===i||"*"!==a&&e.indexOf("/")>-1||"*"===a&&e.indexOf("/")>-1&&t.extensions.indexOf(i)>-1})},validateFileSize:function(e){return!this.maxSize||!e||e<=j.a.parse(this.maxSize)},uploadFiles:function(){var e=this;this.fileList.forEach(function(t){t.toBeUploaded&&e.uploadFile(t)})},onprogress:function(e,t){var i=this.fileList.indexOf(e);switch(this.progress){case"number":case"bar":e.loaded=t.loaded,e.total=t.total,this.updateFileList(e)}this.$emit("progress",this.files[i],i,"xhr"===this.requestMode?t:null)},onload:function(e,t){this.uploadCallback(t,e)},onerror:function(e,t){var i=this.fileList.indexOf(e);this.showFailureResult(t||{},e),this.$emit("failure",this.files[i],i)},uploadFile:function(e){var t=this;if(this.updateFileList(e,"uploading"),"xhr"!==this.requestMode||this.upload)"custom"===this.requestMode&&this.upload&&this.upload.call(null,e,{onload:this.onload,onprogress:this.onprogress,onerror:this.onerror});else{var i=new XMLHttpRequest;e.xhr=i,i.upload.onprogress=function(i){return t.onprogress(e,i)},i.onload=function(){return t.onload(e,t.parseData(i.responseText))},i.onerror=function(i){return t.onerror(e,i)};var a=new FormData;for(var s in a.append(this.name,e),this.payload)a.append(s,this.payload[s]);for(var n in i.open("POST",this.queryURL,!0),this.headers)i.setRequestHeader(n,this.headers[n]);i.withCredentials=this.withCredentials,i.send(a)}},replaceFile:function(e){this.replacingFile=e,this.reset()},submit:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.latestFile;this.currentSubmitingFile=t,this.updateFileList(t,"uploading"),this.isSubmiting=!0,this.$nextTick(function(){var t=e.$refs.form;document.body.appendChild(e.$refs.iframe),document.body.appendChild(t),t.appendChild(e.$refs.input),t.submit(),e.disabledWhenSubmiting=!0})},uploadCallback:function(e,t){this.isSubmiting=!1,this.disabledWhenSubmiting=!1;var i=this.fileList.indexOf(t);"success"===(e=this.convertResponse(e)||e).status?(this.showSuccessResult(e,t),this.$emit("success",this.files[i],i)):"failure"===e.status&&(this.showFailureResult(e,t),this.$emit("failure",this.files[i],i)),this.currentSubmitingFile=null},showSuccessResult:function(e,t){var i=this;t.xhr=null,t.toBeUploaded=null,this.updateFileList(t,"success",e,!0),setTimeout(function(){i.updateFileList(t,null)},300)},showFailureResult:function(e,t){t.xhr=null,t.toBeUploaded=null,t.failureReason=e.reason||"",this.updateFileList(t,"failure",e)},updateFileList:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];void 0!==t&&(e.status=t),i&&(C()(e,i),e._extra=v()(i,["status","name","src"])),this.$set(this.fileList,this.fileList.indexOf(e),e),a&&this.$emit("change",this.getValue(!1))},getPureFile:function(e,t){return C()(g()(e,["name","src"]),v()(t,"status"))},getIndexInPureList:function(e){var t=this.fileList.indexOf(e);return t-this.fileList.slice(0,t).filter(function(e){return"uploading"===e.status||"failure"===e.status}).length},retry:function(e){"iframe"===this.requestMode?this.submit(e):this.uploadFile(e)},removeFile:function(e){this.error.countOverflow=!1;var t=this.fileList.indexOf(e);1===this.maxCount?this.fileList=[]:this.fileList.splice(this.fileList.indexOf(e),1),e.toBeUploaded||this.$emit("change",this.getValue(!0)),this.isReplacing||this.$emit("remove",this.files[t],t)},cancelFile:function(e){"iframe"===this.requestMode&&(this.canceled=!0,this.isSubmiting=!1,this.disabledWhenSubmiting=!1),e.xhr&&e.xhr.abort(),this.removeFile(e)},reset:function(){this.$refs.input.value="",this.$refs.label.appendChild(this.$refs.input)},convertSizeUnit:function(e){return j()(e,{decimalPlaces:1})},parseData:function(e){if("object"===(void 0===e?"undefined":n()(e)))return e;if("string"==typeof e)if("json"===this.dataType)try{return JSON.parse(e)}catch(e){return this.$emit("failure",{error:e}),{status:"failure"}}else if("text"===this.dataType)return e},getScopeValue:function(e,t){return u()({index:e},t)},getValue:function(e){return 1!==this.maxCount?this.pureFileList:e?null:this.compat?this.pureFileList[0].src||this.pureFileList[0].name:this.pureFileList[0]}}},T=(i(1083),i(1)),V=Object(T.a)(B,a,[],!1,null,null,null);t.a=V.exports}}]);