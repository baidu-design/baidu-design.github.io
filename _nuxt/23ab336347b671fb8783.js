(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1298:function(e,t,a){"use strict";var v=a(877);a.n(v).a},1619:function(e,t,a){"use strict";a.r(t);var v=function(){var e=this.$createElement;this._self._c;return this._m(0)};v._withStripped=!0;a(1298);var s=a(1),_=Object(s.a)({},v,[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"content post"},[a("h1",{attrs:{id:"veui-loader"}},[e._v("veui-loader")]),e._v(" "),a("p",[e._v("这个 webpack loader 帮助我们自动在构建时加载 VEUI 组件在主题包中对应的模块。")]),e._v(" "),a("p",[e._v("你可以在 loader 选项中，给每个 VEUI 组件配置对应需要加载的样式、JS 模块。")]),e._v(" "),a("pre",[a("code",{staticClass:"hljs language-js"},[e._v("modules: [\n  {\n    "),a("span",{staticClass:"hljs-attr"},[e._v("package")]),e._v(": "),a("span",{staticClass:"hljs-string"},[e._v("'veui-theme-one'")]),e._v(",\n    "),a("span",{staticClass:"hljs-attr"},[e._v("fileName")]),e._v(": "),a("span",{staticClass:"hljs-string"},[e._v("'${module}.less'")]),e._v("\n  },\n  {\n    "),a("span",{staticClass:"hljs-attr"},[e._v("package")]),e._v(": "),a("span",{staticClass:"hljs-string"},[e._v("'veui-theme-one'")]),e._v(",\n    "),a("span",{staticClass:"hljs-attr"},[e._v("fileName")]),e._v(": "),a("span",{staticClass:"hljs-string"},[e._v("'${module}.js'")]),e._v(",\n    "),a("span",{staticClass:"hljs-attr"},[e._v("transform")]),e._v(": "),a("span",{staticClass:"hljs-literal"},[e._v("false")]),e._v("\n  }\n]")])]),e._v(" "),a("p",[e._v("上面的配置表明我们为每个组件额外引入两个模块。比如对于 "),a("code",[e._v("Button.vue")]),e._v("，会额外引入 "),a("code",[e._v("veui-theme-one/components/button.less")]),e._v(" 和 "),a("code",[e._v("veui-theme-one/components/Button.js")]),e._v(" 这两个模块的代码。")]),e._v(" "),a("h2",{attrs:{id:"为何不用-babel-插件？"}},[e._v("为何不用 Babel 插件？")]),e._v(" "),a("p",[e._v("我们知道，在 Ant Design 和 Element 等组件库中，都是用 Babel 插件（"),a("a",{attrs:{href:"https://github.com/ant-design/babel-plugin-import"}},[e._v("babel-plugin-import")]),e._v("/"),a("a",{attrs:{href:"https://github.com/ElementUI/babel-plugin-component"}},[e._v("babel-plugin-component")]),e._v("）来完成这个工作，但是 VEUI 使用 webpack loader 的原因有两点：")]),e._v(" "),a("ol",[a("li",[e._v("由于 Babel 对 webpack 的 resolve 逻辑并不感知，所以无法准确判断某个路径经过 webpack 解析后对应的模块是否真实存在，需要对主题包的路径有强约束。而 veui-loader 会自动检查每个路径在 webpack 解析完毕后对应的模块是否存在，不会发生引入不存在的模块产生错误的情况。")]),e._v(" "),a("li",[e._v("Vue 在 SSR 自动抽取 critical CSS 时，无法将 JS 代码中引入的样式注入组件，而 veui-loader 通过预处理 "),a("code",[e._v(".vue")]),e._v(" 单文件组件的方式进行依赖注入，可以解决这个问题。")])]),e._v(" "),a("h2",{attrs:{id:"选项"}},[e._v("选项")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("modules")])]),e._v(" "),a("p",[e._v("类型："),a("code",[e._v("Array<{package, path, fileName, transform}>")]),e._v("。")]),e._v(" "),a("p",[e._v("包含每个组件需要额外加载的对应模块信息，是一个数组，每个数组项都表示对于每个组件文件要额外引入的模块。")]),e._v(" "),a("p",[e._v("每个模块项字段如下：")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("字段")]),a("th",[e._v("类型")]),a("th",[e._v("默认值")]),a("th",[e._v("描述")])])]),a("tbody",[a("tr",[a("td",[a("code",[e._v("package")])]),a("td",[a("code",[e._v("string")])]),a("td",[e._v("-")]),a("td",[e._v("需要额外加载模块所属包的名字。一般来说会是主题包的包名，如 "),a("code",[e._v("'veui-theme-one'")]),e._v("。")])]),a("tr",[a("td",[a("code",[e._v("path")])]),a("td",[a("code",[e._v("string")])]),a("td",[a("code",[e._v("'components'")])]),a("td",[e._v("需要加载的模块在对应包内的目录名。")])]),a("tr",[a("td",[a("code",[e._v("fileName")])]),a("td",[a("code",[e._v("string")])]),a("td",[a("code",[e._v("'${module}.css'")])]),a("td",[e._v("组件对应模块的文件名模板，必须包含占位符 "),a("code",[e._v("${module}")]),e._v("。")])]),a("tr",[a("td",[a("code",[e._v("transform")])]),a("td",[a("code",[e._v("string|boolean")])]),a("td",[a("code",[e._v("'kebab-case'")])]),a("td",[e._v("组件名的转换规则。转换完毕后将替换 "),a("code",[e._v("fileName")]),e._v(" 中的 "),a("code",[e._v("${module}")]),e._v(" 占位符。如果值为 "),a("code",[e._v("false")]),e._v(" 则不进行转换。可选的转换规则有 "),a("code",[e._v("'kebab-case'")]),e._v("、"),a("code",[e._v("'camleCase'")]),e._v(" 与 "),a("code",[e._v("'PascalCase'")]),e._v(" 三种。")])])])])])])])}],!1,null,"ff0edd82",null);t.default=_.exports},877:function(e,t,a){}}]);